(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","load-image","bootstrap"],n):n(window.jQuery,window.loadImage)})(function(n,t){"use strict";n.extend(n.fn.modal.defaults,{delegate:document,selector:null,filter:"*",index:0,href:null,preloadRange:2,offsetWidth:100,offsetHeight:200,canvas:!1,slideshow:0,imageClickDivision:.5});var i=n.fn.modal.Constructor.prototype.show,r=n.fn.modal.Constructor.prototype.hide;n.extend(n.fn.modal.Constructor.prototype,{initLinks:function(){var i=this,t=this.options,r=t.selector||"a[data-target="+t.target+"]";this.$links=n(t.delegate).find(r).filter(t.filter).each(function(n){i.getUrl(this)===t.href&&(t.index=n)}),this.$links[t.index]||(t.index=0)},getUrl:function(t){return t.href||n(t).data("href")},startSlideShow:function(){var n=this;this.options.slideshow&&(this._slideShow=window.setTimeout(function(){n.next()},this.options.slideshow))},stopSlideShow:function(){window.clearTimeout(this._slideShow)},toggleSlideShow:function(){var n=this.$element.find(".modal-slideshow");this.options.slideshow?(this.options.slideshow=0,this.stopSlideShow()):(this.options.slideshow=n.data("slideshow")||5e3,this.startSlideShow()),n.find("i").toggleClass("icon-play icon-pause")},preloadImages:function(){for(var t=this.options,u=t.index+t.preloadRange+1,r,i=t.index-t.preloadRange;i<u;i+=1)r=this.$links[i],r&&i!==t.index&&n("<img>").prop("src",this.getUrl(r))},loadImage:function(){var u=this,i=this.$element,f=this.options.index,e=this.getUrl(this.$links[f]),o,r;this.abortLoad(),this.stopSlideShow(),i.trigger("beforeLoad"),this._loadingTimeout=window.setTimeout(function(){i.addClass("modal-loading")},100),o=i.find(".modal-image").children().removeClass("in"),window.setTimeout(function(){o.remove()},3e3),i.find(".modal-title").text(this.$links[f].title);var h=e.match(/\/uploadedimages\/(.*)/)[1],c=n("#eventID").attr("title"),s="http://picaround.azurewebsites.net/Gallery/GalleryOpenImageApi?eventId="+c+"&imageurl="+h;n(".well1").html('<div  class="fb-comments" data-href="'+s+'" data-num-posts="20" data-width="300"><\/div>'),FB.XFBML.parse(document.getElementById("well1")),n(".well1").prepend('<p><div class="fb-like" data-href="'+s+'" data-send="true" data-width="300" data-show-faces="true" style="margin-top: 15px;"><\/div><\/p>'),FB.XFBML.parse(document.getElementById("like")),r=this.$links[f].userInfo,n.ajax({url:"https://graph.facebook.com/"+this.$links[f].userInfo,type:"GET",dataType:"json",error:function(){var t="http://www.picaround.com/gpproxy/GetGooglePlusUserName?userid="+r;n.ajax({url:t,type:"GET",success:function(n){var t="https://www.google.com/s2/photos/profile/"+r,u="https://plus.google.com/"+r,f="<img border=0 src="+t+" />";i.find(".modal-userInfo").html("<a href="+u+">"+f+" "+n+"<\/a>")},error:function(){var t="http://picaround.com/gpproxy/GetGooglePlusUserName?userid="+r;n.ajax({url:t,type:"GET",success:function(n){var t="https://www.google.com/s2/photos/profile/"+r,u="https://plus.google.com/"+r,f="<img border=0 src="+t+" />";i.find(".modal-userInfo").html("<a href="+u+">"+f+" "+n+"<\/a>")},error:function(){}})}})},success:function(n){var t="http://graph.facebook.com/"+n.id,r="https://www.facebook.com/"+ +n.id,u="<img border=0 src="+t+"/picture?type=small />";i.find(".modal-userInfo").html("<a href="+r+">"+u+" "+n.name+"<\/a>")}}),i.find(".modal-download").prop("href",e),this._loadingImage=t(e,function(n){u.img=n,window.clearTimeout(u._loadingTimeout),i.removeClass("modal-loading"),i.trigger("load"),u.showImage(n),u.startSlideShow()},this._loadImageOptions),this.preloadImages()},showImage:function(t){var i=this.$element,o=n.support.transition&&i.hasClass("fade"),s=o?i.animate:i.css,f=i.find(".modal-image"),r,h,u,e;if(f.addClass("SingleImageGallery"),u=parseInt(f.css("max-height").replace("px","")),e=0,u>t.height?(u=t.height,e=t.width):e=u/t.height*t.width,f.css({height:u,width:e}),i.find(".modal-title").css({width:Math.max(t.width,380)}),n(window).width()>480&&(o&&(r=i.clone().hide().appendTo(document.body)),s.call(i.stop(),{"margin-top":-((r||i).outerHeight()/2),"margin-left":-((r||i).outerWidth()/2)}),r&&r.remove()),f.append(t),h=t.offsetWidth,i.trigger("display"),o)if(i.is(":visible"))n(t).on(n.support.transition.end,function(r){r.target===t&&(n(t).off(n.support.transition.end),i.trigger("displayed"))}).addClass("in");else{n(t).addClass("in");i.one("shown",function(){i.trigger("displayed")})}else n(t).addClass("in"),i.trigger("displayed")},abortLoad:function(){this._loadingImage&&(this._loadingImage.onload=this._loadingImage.onerror=null),window.clearTimeout(this._loadingTimeout)},prev:function(){var n=this.options;n.index-=1,n.index<0&&(n.index=this.$links.length-1),this.loadImage()},next:function(){var n=this.options;n.index+=1,n.index>this.$links.length-1&&(n.index=0),this.loadImage()},keyHandler:function(n){switch(n.which){case 37:case 38:n.preventDefault(),this.prev();break;case 39:case 40:n.preventDefault(),this.next()}},wheelHandler:function(n){n.preventDefault(),n=n.originalEvent,this._wheelCounter=this._wheelCounter||0,this._wheelCounter+=n.wheelDelta||n.detail||0,n.wheelDelta&&this._wheelCounter>=120||!n.wheelDelta&&this._wheelCounter<0?(this.prev(),this._wheelCounter=0):(n.wheelDelta&&this._wheelCounter<=-120||!n.wheelDelta&&this._wheelCounter>0)&&(this.next(),this._wheelCounter=0)},initGalleryEvents:function(){var t=this,i=this.$element;i.find(".modal-image").on("click.modal-gallery",function(i){var r=n(this);t.$links.length===1?t.hide():(i.pageX-r.offset().left)/r.width()<t.options.imageClickDivision?t.prev(i):t.next(i)});i.find(".modal-prev").on("click.modal-gallery",function(n){t.prev(n)});i.find(".modal-next").on("click.modal-gallery",function(n){t.next(n)});i.find(".modal-slideshow").on("click.modal-gallery",function(n){t.toggleSlideShow(n)});n(document).on("keydown.modal-gallery",function(n){t.keyHandler(n)}).on("mousewheel.modal-gallery, DOMMouseScroll.modal-gallery",function(n){t.wheelHandler(n)})},destroyGalleryEvents:function(){var t=this.$element;this.abortLoad(),this.stopSlideShow(),t.find(".modal-image, .modal-prev, .modal-next, .modal-slideshow").off("click.modal-gallery"),n(document).off("keydown.modal-gallery").off("mousewheel.modal-gallery, DOMMouseScroll.modal-gallery")},show:function(){if(!this.isShown&&this.$element.hasClass("modal-gallery")){var t=this.$element,r=this.options,u=n(window).width(),f=n(window).height();t.hasClass("modal-fullscreen")?(this._loadImageOptions={maxWidth:u,maxHeight:f,canvas:r.canvas},t.hasClass("modal-fullscreen-stretch")&&(this._loadImageOptions.minWidth=u,this._loadImageOptions.minHeight=f)):this._loadImageOptions={maxWidth:u-r.offsetWidth,maxHeight:f-r.offsetHeight,canvas:r.canvas},u>480&&t.css({"margin-top":-(t.outerHeight()/2),"margin-left":-(t.outerWidth()/2)}),this.initGalleryEvents(),this.initLinks(),this.$links.length&&(t.find(".modal-slideshow, .modal-prev, .modal-next").toggle(this.$links.length!==1),t.toggleClass("modal-single",this.$links.length===1),this.loadImage())}i.apply(this,arguments)},hide:function(){this.isShown&&this.$element.hasClass("modal-gallery")&&(this.options.delegate=document,this.options.href=null,this.destroyGalleryEvents()),r.apply(this,arguments)}}),n(function(){n(document.body).on("click.modal-gallery.data-api",'[data-toggle="modal-gallery"]',function(t){var e=n(this),i=e.data(),u=n(i.target),f=u.data("modal"),r;f||(i=n.extend(u.data(),i)),i.selector||(i.selector="a[rel=gallery]"),r=n(t.target).closest(i.selector),r.length&&u.length&&(t.preventDefault(),i.href=r.prop("href")||r.data("href"),i.delegate=r[0]!==this?this:document,f&&n.extend(f.options,i),u.modal(i))})})});
//@ sourceMappingURL=bootstrap-image-gallery.min.js.map